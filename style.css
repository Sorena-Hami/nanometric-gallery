:root {
    --bg: #121212; --card: #1e1e1e; --text: #eee; --border: #333;
    --primary: #00f2ff; --accent: #ff0055;
}
[data-theme="light"] {
    --bg: #f5f5f5; --card: #fff; --text: #333; --border: #ddd;
    --primary: #007aff;
}

body { margin:0; font-family:'Vazirmatn', sans-serif; background:var(--bg); color:var(--text); overflow-x:hidden; user-select:none; -webkit-user-select:none; padding-bottom:80px; }
* { box-sizing:border-box; outline:none; }
img { pointer-events:none; }

#loader-overlay { position:fixed; inset:0; background:var(--bg); z-index:9999; display:flex; flex-direction:column; align-items:center; justify-content:center; }
.spinner { width:40px; height:40px; border:4px solid var(--border); border-top-color:var(--primary); border-radius:50%; animation:spin 1s linear infinite; margin-bottom:10px; }
@keyframes spin { 100%{transform:rotate(360deg)} }

/* Header */
.main-header { padding:10px 15px; border-bottom:1px solid var(--border); background:var(--bg); }
.header-top { display:flex; justify-content:space-between; align-items:center; }
.logo { height:50px; }
.brand-name { display:block; font-size:0.8rem; letter-spacing:1px; margin-top:2px; font-weight:bold; }

/* Theme Switch */
.theme-toggle-wrapper { position:relative; width:50px; height:26px; }
#theme-chk { display:none; }
.theme-label { position:absolute; cursor:pointer; inset:0; background:var(--card); border:1px solid var(--border); border-radius:30px; display:flex; align-items:center; justify-content:space-between; padding:0 5px; }
.ball { position:absolute; height:20px; width:20px; left:3px; bottom:2px; background:var(--primary); border-radius:50%; transition:.3s; }
#theme-chk:checked + .theme-label .ball { transform:translateX(24px); }
.sun { color:orange; font-size:12px; } .moon { color:#333; font-size:12px; }

/* Slider */
.swiper { width:100%; height:200px; border-radius:15px; margin-top:15px; }
.swiper-slide img { width:100%; height:100%; object-fit:cover; }
.slide-txt { position:absolute; bottom:0; width:100%; background:rgba(0,0,0,0.7); color:white; padding:10px; font-weight:bold; }

/* Tools */
.sticky-tools { position:sticky; top:0; z-index:100; background:var(--bg); padding:10px 0; border-bottom:1px solid var(--border); }
.search-box { padding:0 15px; margin-bottom:10px; }
#searchInput { width:100%; padding:10px; border-radius:10px; border:1px solid var(--border); background:var(--card); color:var(--text); }

.albums-scroll { display:flex; gap:10px; overflow-x:auto; padding:0 15px; scrollbar-width:none; }
.album { min-width:80px; text-align:center; opacity:0.7; transition:.3s; cursor:pointer; }
.album.active { opacity:1; transform:scale(1.05); }
.album img { width:60px; height:50px; border-radius:10px; object-fit:cover; border:2px solid var(--border); position:relative; z-index:1; }
/* Folder Effect */
.album::after { content:''; display:block; height:5px; width:90%; background:var(--border); margin:-15px auto 0; border-radius:0 0 10px 10px; position:relative; z-index:0; }
.album.active img { border-color:var(--primary); }

/* Gallery */
.gallery-grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(160px, 1fr)); gap:15px; padding:15px; }
.card { background:var(--card); border-radius:15px; border:1px solid var(--border); overflow:hidden; position:relative; cursor:pointer; }
.card-img { position:relative; padding-top:100%; }
.card-img img { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }

/* دکمه شیشه‌ای اصلاح شده: پایین راست تصویر */
.glass-btn { 
    position: absolute; bottom: 8px; right: 8px; z-index: 5;
    background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(8px);
    border: 1px solid rgba(255,255,255,0.4); color: white;
    padding: 5px 10px; border-radius: 8px; font-size: 0.75rem; font-weight: bold;
    display: flex; align-items: center; gap: 5px; transition: 0.3s;
}
.glass-btn.added { background: #00ff88; color: black; border-color: #00ff88; }

.card-info { padding:10px; }
.stats { display:flex; justify-content:space-between; font-size:0.75rem; color:var(--muted); margin-bottom:5px; }
.stats i { margin-right:2px; }
.price-row { font-weight:bold; color:var(--primary); margin-top:5px; font-size:0.9rem; }
.old { text-decoration:line-through; text-decoration-color:red; text-decoration-thickness: 2px; color:var(--muted); font-size:0.8rem; margin-left:5px; transform: rotate(-5deg); display:inline-block; }
.copy-code { float:left; font-family:monospace; background:var(--border); padding:2px 6px; border-radius:4px; font-size:0.7rem; cursor:pointer; }

/* Float Buttons */
.float-wrapper { position:fixed; bottom:20px; left:20px; z-index:90; display:flex; flex-direction:column; gap:15px; }
.float-btn { width:55px; height:55px; border-radius:50%; border:none; display:flex; align-items:center; justify-content:center; font-size:1.4rem; color:white; box-shadow:0 5px 15px rgba(0,0,0,0.4); cursor:pointer; }
.cart { background:var(--primary); color:black; }
.contact { background:#34495e; }
.contact-menu { display:none; flex-direction:column; gap:10px; margin-bottom:10px; }
.contact-menu.show { display:flex; animation:up 0.3s; }
.c-item { background:#222; color:white; padding:8px 15px; border-radius:20px; text-decoration:none; display:flex; align-items:center; gap:8px; width:max-content; font-size:0.9rem; }
@keyframes up { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
#cart-count { position:absolute; top:0; right:0; background:red; color:white; font-size:0.7rem; width:20px; height:20px; border-radius:50%; display:flex; align-items:center; justify-content:center; }

.scroll-nav { position:fixed; right:20px; bottom:90px; display:flex; flex-direction:column; gap:10px; z-index:80; }
.scroll-nav button { width:40px; height:40px; border-radius:50%; background:rgba(0,0,0,0.5); color:white; border:1px solid var(--border); cursor:pointer; }

/* Drawer & Modal */
.drawer { position:fixed; top:0; left:-100%; width:100%; height:100%; background:var(--card); z-index:200; transition:0.3s; display:flex; flex-direction:column; }
.drawer.open { left:0; }
.drawer-head { padding:15px; border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:center; }
.drawer-body { flex:1; overflow-y:auto; padding:15px; }
.drawer-foot { padding:15px; border-top:1px solid var(--border); text-align:center; }
.btn-main { width:100%; padding:12px; background:var(--primary); color:black; font-weight:bold; border:none; border-radius:10px; cursor:pointer; margin-top:10px; }
.btn-sec { padding:8px 15px; border:1px solid var(--border); background:transparent; color:var(--text); border-radius:8px; cursor:pointer; }
.clear { background:#ff3b30; color:white; border:none; }

.modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.95); z-index:250; overflow-y:auto; align-items:center; justify-content:center; }
.modal-content { background:var(--card); width:100%; min-height:100vh; position:relative; padding-top:50px; }
@media(min-width:768px) { .modal-content { width:500px; min-height:auto; border-radius:20px; margin:20px auto; padding-top:0; overflow:hidden; } }
.back-btn { position:absolute; top:15px; right:15px; background:rgba(0,0,0,0.6); color:white; border:1px solid #555; padding:5px 15px; border-radius:20px; cursor:pointer; z-index:10; }

.img-container { position:relative; background:black; text-align:center; }
.img-container img { max-width:100%; max-height:50vh; }
.zoom-controls { position:absolute; bottom:10px; left:10px; display:flex; gap:5px; }
.zoom-controls button { width:35px; height:35px; background:rgba(0,0,0,0.5); color:white; border:none; border-radius:5px; cursor:pointer; }
.fs-btn { position:absolute; bottom:10px; right:10px; width:35px; height:35px; background:rgba(0,0,0,0.5); color:white; border:none; border-radius:5px; cursor:pointer; }

.details { padding:20px; text-align:center; }
.stat-row { display:flex; justify-content:center; gap:20px; margin-bottom:15px; border-bottom:1px solid var(--border); padding-bottom:10px; font-size:1.1rem; }
.code-row { background:var(--border); padding:5px 10px; border-radius:20px; display:inline-flex; align-items:center; gap:10px; margin-bottom:15px; cursor:pointer; }
.desc-box { background:rgba(255,255,255,0.05); padding:15px; border-radius:10px; margin:15px 0; text-align:right; font-size:0.9rem; position:relative; }
.desc-box button { position:absolute; top:5px; left:5px; background:transparent; border:none; color:var(--muted); cursor:pointer; }
.share-pic-btn { width:100%; background:transparent; border:none; margin-top:15px; cursor:pointer; padding:0; }
.share-pic-btn img { width:100%; border-radius:10px; }

/* Small Modal */
.modal.small { align-items:center; justify-content:center; }
.modal-content.small { min-height:auto; width:90%; max-width:350px; padding:20px; border-radius:15px; text-align:center; }
.app-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin:20px 0; }
.app-grid button { display:flex; align-items:center; gap:5px; padding:10px; border:1px solid var(--border); background:var(--bg); color:var(--text); border-radius:10px; cursor:pointer; justify-content:center; }
.app-grid img { width:24px; }

/* Fullscreen */
#fs-view { display:none; position:fixed; inset:0; background:black; z-index:1000; align-items:center; justify-content:center; }
#fs-img { max-width:100%; max-height:100%; transition:transform 0.2s; }
.fs-close { position:absolute; top:20px; right:20px; background:rgba(255,255,255,0.3); color:white; border:none; padding:10px 20px; border-radius:20px; cursor:pointer; }

#toast { position:fixed; bottom:100px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.8); color:white; padding:10px 20px; border-radius:20px; display:none; z-index:2000; }
footer { background:#000; padding:30px; text-align:center; margin-top:50px; }
.trust img { height:50px; margin:5px; filter:grayscale(100%); opacity:0.7; }
